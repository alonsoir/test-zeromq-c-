cd /vagrant

# Stage todo lo necesario
git add docs/STRESS_TEST_FIREWALL.md
git add tools/src/synthetic_ml_output_injector.cpp
git add tools/src/synthetic_sniffer_injector.cpp
git add tools/CMakeLists.txt

# Commit
git commit -m "feat(contract-validation): Add stress test tools for 142-feature contract validation

Add synthetic event injectors to validate protobuf contract compliance
across all pipeline components under load.

Tools Added:
- synthetic_sniffer_injector: Validates sniffer→ml-detector contract
  * Generates complete NetworkSecurityEvent (142 features)
  * Tests protobuf serialization + crypto-transport at scale
  * Port 5571, achieves ~1.4K events/sec

- synthetic_ml_output_injector: Validates ml-detector→firewall contract
  * Generates threat events with ML analysis fields
  * Tests firewall protobuf parsing under load
  * Port 5572, achieves ~1.4K events/sec

Stress Test Report (Day 49 - Iteration 1-2):
- Discovered firewall etcd registration bug (HIGH severity)
- Established injector baseline: ~1.5K events/sec max throughput
- Validated crypto-transport integration (ChaCha20+LZ4)
- Contract compliance: Protobuf messages correctly formed

Issues Found:
1. [HIGH] Firewall crashes when etcd registration fails mid-startup
2. [MEDIUM] Injector bottleneck: per-event crypto overhead
3. [LOW] Insufficient logging visibility in firewall processing

Next Actions (Day 50):
- Add verbose logging to firewall (IP additions, batch operations)
- Add crash diagnostics (exception context, stack traces)
- Fix etcd registration bug
- Re-run with detailed observability

Documentation: docs/STRESS_TEST_FIREWALL.md

Branch: feature/contract-validation-142-features
Refs: Day 49 Phase 1 Hardening
"

# Push
git push origin feature/contract-validation-142-features